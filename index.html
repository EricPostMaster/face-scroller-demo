<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Face-Controlled Side Scroller</title>
<style>
body {
  margin: 0;
  font-family: sans-serif;
  background: #111;
  color: #eee;
  text-align: center;
}
/* Make the page vertically scrollable on small devices. Previously overflow:hidden
   prevented scrolling so scoreboard and buttons became unreachable. */
html, body {
  height: 100%;
}

/* On small screens allow natural scrolling and ensure content can flow vertically */
body {
  -webkit-overflow-scrolling: touch;
}
#app {
  display: flex;
  align-items: flex-start;
  justify-content: center;
  gap: 16px;
  padding: 12px;
  /* allow app content to grow and push page height so the browser can scroll */
  width: 100%;
}
#gameArea {
  display: flex;
  flex-direction: column;
  align-items: center;
}
#gameCanvas {
  display: block;
  background: #222;
  border-radius: 10px;
}
#status {
  font-size: 1.2em;
  margin: 5px;
}
#debug {
  font-size: 0.9em;
  text-align: left;
  margin: 5px auto;
  background: #222;
  padding: 5px 10px;
  border-radius: 6px;
  width: 300px;
}

/* Bottom debug dock: collapsed by default on all screens */
#debugDock {
  position: fixed;
  left: 12px;
  right: 12px;
  bottom: 12px;
  display: flex;
  gap: 8px;
  align-items: flex-end;
  justify-content: flex-end;
  pointer-events: auto;
  z-index: 9999;
}

#debugDock #debugToggleDock {
  background: rgba(255,255,255,0.06);
  color: #fff;
  border: 1px solid rgba(255,255,255,0.06);
  padding: 8px 10px;
  border-radius: 8px;
  cursor: pointer;
}

/* Collapsed: hide the debug panel visually but keep it accessible when opened */
#debugDock #debug.collapsed {
  display: none;
}

/* Expanded debug panel */
#debugDock #debug.expanded {
  display: block;
  max-height: 40vh;
  overflow: auto;
  width: calc(100% - 120px);
}
#tryAgain {
  display: none;
  font-size: 1.2em;
  background: #28a;
  color: white;
  border: none;
  border-radius: 8px;
  padding: 10px 20px;
  margin-top: 10px;
}
#scoreBoard {
  width: 220px;
  background: #222;
  border-radius: 8px;
  padding: 10px;
  text-align: left;
  color: #fff;
}
#scoreBoard h3 {
  margin: 4px 0 8px 0;
  font-size: 1.0rem;
  text-align: center;
}
#scoreList {
  list-style: none;
  padding: 0;
  margin: 0;
}
.scoreRow {
  display: flex;
  justify-content: space-between;
  padding: 6px 8px;
  border-radius: 6px;
}
.scoreRow:nth-child(odd) { background: rgba(255,255,255,0.02); }
.scoreName { color: #ffd; }
.scoreValue { color: #9f9; }
.small { font-size: 0.85rem; color: #bbb }
#namePrompt {
  display: none;
  margin-top: 8px;
}
#resetScores {
  margin-top: 8px;
  background: transparent;
  color: #f88;
  border: 1px solid #333;
  padding: 6px 8px;
  border-radius: 6px;
}

/* Responsive: stack scoreboard under the game on narrow screens */
@media (max-width: 700px) {
  #app {
    flex-direction: column;
    align-items: center;
  }
  #scoreBoard {
    width: calc(100% - 24px);
    max-width: 480px;
    margin-top: 12px;
  }
  #gameCanvas {
    width: calc(100% - 24px);
    height: auto;
    max-width: 480px;
  }
  #debug { width: calc(100% - 24px); max-width: 480px; }
}
</style>
</head>
<body>
<h2>ðŸŽ® Face-Controlled Side Scroller</h2>
<video id="webcam" autoplay playsinline muted style="display:none;"></video>

<div id="app">
  <div id="gameArea">
    <canvas id="gameCanvas" width="400" height="300"></canvas>
  <div id="status">Loading model...</div>
    <button id="tryAgain">Try Again</button>
  </div>

  <aside id="scoreBoard" aria-label="Top scores">
    <h3>Top 5 Scores</h3>
    <ul id="scoreList"></ul>
    <div id="namePrompt">
      <div class="small">You made the top 5! Enter your name:</div>
      <input id="playerName" type="text" maxlength="16" placeholder="Your name" />
      <button id="saveName">Save</button>
    </div>
    <button id="resetScores" title="Clear saved scores">Reset Scores</button>
  </aside>
  <div style="margin:6px;">
    <label style="font-size:0.95em;">
      <input type="checkbox" id="debugToggle"> Debug Mode (Invincible)
    </label>
  </div>
</div>
</div>

<!-- Bottom debug dock (collapsed by default). The game's JS will continue to write into #debug -->
<div id="debugDock">
  <button id="debugToggleDock" aria-expanded="false" aria-controls="debug" title="Show debug info">Show debug</button>
  <div id="debug" class="collapsed" role="region" aria-hidden="true">Debug info will appear here</div>
</div>

<script type="module" src="script.js"></script>
</body>
</html>
